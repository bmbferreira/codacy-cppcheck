Division by result of sizeof(). memset() expects a size in bytes, did you intend to multiply instead?